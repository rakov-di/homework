Вернуться на [главную](README.md)

## Содержание <a name = "content_table"></a>

- [Описание](#about)
- [Начало работы](#getting_started)
- [Структура файлов](#file_tree)
- [TODO](#todo)

## Описание <a name = "about"></a>

**На данный момент сделано**:
 - Созданы react-компоненты для css-блоков (css-стили разбиты по компонентам)
 - Страница `/` (или `/start-screen`):
    - При открытии происходит запрос за текущими настройками (во время выполнения запроса крутится лоадер). Если настройки есть - идет перенаправление на страницу `/build-history`, если их нет - открывается страница `/start-screen`. На странице `start-screen` по клику на кнопке `Open settings` открывается страница `settings`.
 - Страница `/settings`
    - В поле `Репозиорий` надо вводить полное название репозитория, например: `https://github.com/rakov-di/homework_async`
    - Ограничена возможность ввода в поле "период" - только цифры.
    - При клике на кнопку `Save` происходит js-проверка заполнены ли обязательные поля.
    - Если поля заполнены - отправляется запрос на добавление/обновление настроек репозитория, на время выполнения запроса (в частности, при клонировании репозитория на сервере) кнопки на странице блокируются. 
    - При клике на кнопку `Cancel` - переход на страницу `start-screen` (если настройки уже есть - оттуда сразу перенаправляет на `build-history`).
 - Страница `/build-history`
    - При клике на кнопку `Шестеренка` - переход на страницу `settings`.
    - При клике на кнопку `Run build` открывается модальное окно. 
    - Закрывается окно по клику на кнопку `Cancel`, на серую подложку вокруг или клавишей `Esc`. 
    - При клике по `Run build` в модальном окне происходит постановка введенного коммита (по `id` сборки) в очередь сборки и перенаправление на страницу `/build/{nimber}`. 
    - Если введенного хэша коммита нет в очереди сборок - показывается сообщение об ошибке в форме.
- Страница `/build/{number}` 
    - при клике на кнопку `Rebuild` происходит постановка текущего билда в очередь сборки, страница обновляется. Для каждого билда выводится раскрашенный лог-заглушка.
    - при клике на кнопку `Шестеренка` - переход на страницу `settings`

Для работы реакт-приложения использовались дополнительные пакеты:
- `date-fns` - форматирование даты/времени
- `ansi-to-html` - раскраска логов
- `axios` - для отправки запросов к серверу

Вернуться [К содержанию](#content_table)

## Начало работы <a name = "getting_started"></a>

Для запуска приложения необходимо:

### 1. Запустить NodeJS server

Посмотреть в [readme к домашке по node js](README-NODEJS.md#getting_started)

### 2. Запустить клиентское приложение React
- Зайти в папку [client](client)
- Запустить react-приложение из консоли
```CLI
npm start
```
- Доступ к приложению реализован через `http://localhost:3000`

Вернуться [К содержанию](#content_table)

## Структура файлов <a name = "file_tree"></a>

- [client](client) - папка с react приложением
    - [src](client/src) - исходники 
        - [pages](client/src/pages) - все страницы приложения
        - [components](client/src/components) - основные компоненты, из которых состоят страницы
        - [css](client/src/css) - общий css для всего приложения
        - [img](client/src/img) - спрайт с иконками
        - [api.js](client/src/api.js) - методы для работы с api сервера

- [server](server) - папка с node js сервером

- [build](build), [src](src) - папки с версткой для первой домашки. Пока используются для контроля, что при переносе в react ничего не потерялось. По завершении домашки по react - перенести в архив.

Вернуться [К содержанию](#content_table)

## TODO

- Добавить иконки и стили 2 отсутствующим в макете статусам билдов (`inprogress` и `cancel`)
- Подключить redux!!!
- Добавить обработчик на кнопку Show more на странице `/build-history`.
- Добавить вставку текущих настроек репозитория в соответствующие поля при открытии страницы `settings`
- Поправить верстку карточки на странице `/build/{number}`) 
- Доразделить стили для компонетов `Card` и `Icon` (для этого поменять принцип создания svg-спрайта с иконками)
- Использовать `date-fns` для вывода времени билда (сейчас используется только для выводы даты, время - считаю вручную)
- Проверить в коде не осталось ли незакрытых TODO

Вернуться [К содержанию](#content_table)

Вернуться на [главную](README.md)
